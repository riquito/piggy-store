version: '2'
services:
    user_db:
        volumes:
            - ./var/tests/redis:/data
    s3_like:
        volumes:
            - ./var/tests/minio/config:/root/.minio
            - ./var/tests/minio/volumes:/export
        environment:
            MINIO_ACCESS_KEY: test_s3_access_key
            MINIO_SECRET_KEY: test_s3_secret_key
    web:
        image: riquito/piggy-store-alpine
        entrypoint: /usr/bin/tox -e py3-coveralls
        environment:
            APP_S3_SECURE: 'false'
            APP_S3_KEY_ACCESS: test_s3_access_key
            APP_S3_KEY_SECRET: test_s3_secret_key
            APP_PIGGY_HOST: '0.0.0.0'
            APP_PIGGY_PORT: '5000'
            TRAVIS:
            TRAVIS_JOB_ID:
            TRAVIS_BRANCH:

